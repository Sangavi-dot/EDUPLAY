<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>üéÆ Super Learning Adventure - Catch the Answer!</title>
  <style>
    body {
      font-family: 'Comic Sans MS', cursive, Arial, sans-serif;
      background: linear-gradient(45deg, #ff6b6b, #4ecdc4, #45b7d1, #96ceb4);
      background-size: 400% 400%;
      animation: gradientShift 8s ease infinite;
      text-align: center;
      padding: 20px;
      margin: 0;
      min-height: 100vh;
    }
    
    @keyframes gradientShift {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
    
    h1 { 
      color: #2c3e50; 
      font-size: 2.5em;
      text-shadow: 3px 3px 6px rgba(0,0,0,0.3);
      animation: bounce 2s infinite;
    }
    
    @keyframes bounce {
      0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
      40% { transform: translateY(-10px); }
      60% { transform: translateY(-5px); }
    }
    
    .btn {
      background: linear-gradient(45deg, #3498db, #2980b9);
      color: white;
      border: none;
      padding: 15px 25px;
      margin: 8px;
      border-radius: 25px;
      cursor: pointer;
      font-size: 18px;
      font-weight: bold;
      box-shadow: 0 8px 15px rgba(0,0,0,0.2);
      transition: all 0.3s ease;
      text-transform: uppercase;
    }
    
    .btn:hover { 
      background: linear-gradient(45deg, #2980b9, #3498db);
      transform: translateY(-3px);
      box-shadow: 0 12px 20px rgba(0,0,0,0.3);
    }
    
    .btn:active {
      transform: translateY(0);
      box-shadow: 0 5px 10px rgba(0,0,0,0.2);
    }
    
    #gameBox, #teacherDashboard { display: none; }
    
    .question { 
      font-size: 28px; 
      margin: 20px 0; 
      font-weight: bold;
      color: #2c3e50;
      background: rgba(255,255,255,0.9);
      padding: 20px;
      border-radius: 20px;
      box-shadow: 0 10px 25px rgba(0,0,0,0.1);
      animation: pulse 2s infinite;
    }
    
    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.02); }
      100% { transform: scale(1); }
    }
    
    .score { 
      font-size: 24px; 
      color: #27ae60; 
      margin-top: 20px; 
      font-weight: bold;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
    }
    
    .dashboard {
      background: rgba(255,255,255,0.95); 
      padding: 25px; 
      border-radius: 20px;
      box-shadow: 0 15px 35px rgba(0,0,0,0.1);
      margin: 15px auto;
      width: 70%;
    }
    
    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 16px;
    }
    
    th, td {
      padding: 12px;
      border: 2px solid #ecf0f1;
      text-align: center;
    }
    
    th {
      background: linear-gradient(45deg, #3498db, #2980b9);
      color: white;
      font-weight: bold;
    }
    
    /* Enhanced Game Container */
    #gameContainer {
      position: relative;
      width: 85%;
      height: 450px;
      margin: 25px auto;
      border: 5px solid #3498db;
      border-radius: 25px;
      background: linear-gradient(to bottom, #87CEEB 0%, #98FB98 50%, #FFE4B5 100%);
      overflow: hidden;
      box-shadow: 0 15px 30px rgba(0,0,0,0.2);
    }
    
    /* PLAIN ANSWERS - No special colors initially */
    .fallingAnswer {
      position: absolute;
      background: linear-gradient(45deg, #95a5a6, #7f8c8d);
      color: white;
      padding: 12px 18px;
      border-radius: 20px;
      cursor: pointer;
      font-weight: bold;
      font-size: 20px;
      min-width: 100px;
      text-align: center;
      box-shadow: 0 8px 16px rgba(0,0,0,0.3);
      transition: all 0.3s ease;
      border: 3px solid #fff;
      animation: sparkle 2s infinite;
    }
    
    @keyframes sparkle {
      0%, 100% { box-shadow: 0 8px 16px rgba(0,0,0,0.3); }
      50% { box-shadow: 0 8px 16px rgba(0,0,0,0.3), 0 0 20px rgba(255,255,255,0.8); }
    }
    
    .fallingAnswer:hover {
      transform: scale(1.15) rotate(5deg);
      background: linear-gradient(45deg, #7f8c8d, #95a5a6);
    }
    
    /* Styles for when answers are revealed (only after wrong answer) */
    .revealedCorrectAnswer {
      background: linear-gradient(45deg, #27ae60, #2ecc71) !important;
      transform: scale(1.2) !important;
      animation: correctReveal 2s ease-in-out !important;
      border: 4px solid #f1c40f !important;
      box-shadow: 0 0 30px rgba(39,174,96,0.8) !important;
    }
    
    .revealedWrongAnswer {
      background: linear-gradient(45deg, #e74c3c, #c0392b) !important;
      transform: scale(0.9) !important;
      opacity: 0.7;
      animation: wrongReveal 1s ease-out !important;
    }
    
    .clickedCorrectAnswer {
      background: linear-gradient(45deg, #27ae60, #2ecc71) !important;
      transform: scale(1.3) rotate(360deg) !important;
      border: 4px solid #f39c12 !important;
      box-shadow: 0 0 40px rgba(39,174,96,1) !important;
    }
    
    .clickedWrongAnswer {
      background: linear-gradient(45deg, #e74c3c, #c0392b) !important;
      transform: scale(0.8) rotate(-180deg) !important;
      opacity: 0.8;
    }
    
    @keyframes correctReveal {
      0% { transform: scale(1); }
      50% { transform: scale(1.3) rotate(10deg); }
      100% { transform: scale(1.2) rotate(0deg); }
    }
    
    @keyframes wrongReveal {
      0% { opacity: 1; }
      100% { opacity: 0.7; }
    }
    
    .gameStats {
      display: flex;
      justify-content: space-around;
      margin: 15px 0;
      font-size: 22px;
      font-weight: bold;
    }
    
    .lives {
      color: #e74c3c;
      background: rgba(255,255,255,0.9);
      padding: 10px 20px;
      border-radius: 15px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }
    
    .points {
      color: #27ae60;
      background: rgba(255,255,255,0.9);
      padding: 10px 20px;
      border-radius: 15px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }
    
    .celebration {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 4em;
      z-index: 1000;
      animation: celebrate 1s ease-out;
    }
    
    @keyframes celebrate {
      0% { transform: translate(-50%, -50%) scale(0); opacity: 0; }
      50% { transform: translate(-50%, -50%) scale(1.2); opacity: 1; }
      100% { transform: translate(-50%, -50%) scale(1); opacity: 0; }
    }
    
    .intro-text {
      font-size: 20px;
      color: #2c3e50;
      background: rgba(255,255,255,0.9);
      padding: 15px;
      border-radius: 15px;
      margin: 20px auto;
      width: 80%;
      box-shadow: 0 8px 20px rgba(0,0,0,0.1);
    }
    
    .language-selector {
      background: rgba(255,255,255,0.9);
      padding: 15px;
      border-radius: 15px;
      margin: 20px auto;
      width: fit-content;
      box-shadow: 0 8px 20px rgba(0,0,0,0.1);
    }
    
    select {
      padding: 10px 15px;
      font-size: 16px;
      border-radius: 10px;
      border: 2px solid #3498db;
      background: white;
    }
    
    .floating-emoji {
      position: absolute;
      font-size: 2em;
      animation: float 3s ease-in-out infinite;
      pointer-events: none;
    }
    
    @keyframes float {
      0%, 100% { transform: translateY(0px) rotate(0deg); }
      50% { transform: translateY(-20px) rotate(180deg); }
    }

    /* Educational message box */
    .educationalMessage {
      background: rgba(255,255,255,0.95);
      padding: 20px;
      border-radius: 15px;
      margin: 20px auto;
      width: 80%;
      box-shadow: 0 10px 25px rgba(0,0,0,0.2);
      font-size: 18px;
      font-weight: bold;
      border-left: 6px solid #3498db;
    }
  </style>
</head>
<body>

  <h1>üéÆ Super Learning Adventure! üåü</h1>
  <div class="intro-text">
    üöÄ Welcome to the most FUN way to learn! üéØ Choose your subject and catch the falling answers! 
    <br>üé™ Get ready for an EPIC learning adventure! üéä
  </div>

  <!-- Subject Selection with enhanced styling -->
  <div style="margin: 30px 0;">
    <h2>üéØ Choose Your Learning Quest!</h2>
    <button class="btn" onclick="startGame('math')">üî¢ Math Magic</button>
    <button class="btn" onclick="startGame('science')">üî¨ Science Explorer</button>
    <button class="btn" onclick="startGame('english')">üìö Word Wizard</button>
  </div>

  <!-- Language Switch -->
  <div class="language-selector">
    <label for="language">üåê Select Language / ‡§≠‡§æ‡§∑‡§æ ‡§ö‡•Å‡§®‡•á‡§Ç / ‡¨≠‡¨æ‡¨∑‡¨æ ‡¨¨‡¨æ‡¨õ‡¨®‡≠ç‡¨§‡≠Å: </label>
    <select id="language" onchange="changeLanguage()">
      <option value="en">üá¨üáß English</option>
      <option value="hi">üáÆüá≥ ‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</option>
      <option value="or">üáÆüá≥ ‡¨ì‡¨°‡¨º‡¨ø‡¨Ü</option>
    </select>
  </div>

  <!-- Game Box -->
  <div id="gameBox">
    <h2 id="subjectTitle"></h2>
    
    <div class="gameStats">
      <div class="lives" id="livesDisplay">‚ù§Ô∏è Lives: 3</div>
      <div class="points" id="pointsDisplay">‚≠ê Score: 0</div>
    </div>
    
    <div id="questionBox" class="question"></div>
    <div id="gameContainer"></div>
    
    <div id="scoreBox" class="score"></div>
    <div id="educationalBox" class="educationalMessage" style="display: none;"></div>
    
    <button class="btn" onclick="nextQuestion()">‚û°Ô∏è Next Challenge!</button>
    <br><br>
    <button class="btn" onclick="showDashboard()">üë©‚Äçüè´ Teacher's Magic Board</button>
  </div>

  <!-- Enhanced Teacher Dashboard -->
  <div id="teacherDashboard">
    <h2>üìä üéâ Super Teacher Dashboard üéâ</h2>
    <div class="dashboard">
      <h3>üèÜ Student Hall of Fame üåü</h3>
      <table>
        <tr><th>üßë‚Äçüéì Student Hero</th><th>üìñ Subject Quest</th><th>‚≠ê Achievement Score</th><th>üéñÔ∏è Badge</th></tr>
        <tr><td>Ravi üöÄ</td><td>Math Magic</td><td>2/3</td><td>ü•à Silver Star</td></tr>
        <tr><td>Sita üåü</td><td>Science Explorer</td><td>3/3</td><td>ü•á Gold Champion</td></tr>
        <tr><td>Arun üìö</td><td>Word Wizard</td><td>1/3</td><td>ü•â Bronze Learner</td></tr>
        <tr style="background: #f39c12; color: white;"><td><b>üéØ YOU! üéØ</b></td><td id="yourSub"></td><td id="yourScore"></td><td id="yourBadge"></td></tr>
      </table>
    </div>
    <br>
    <button class="btn" onclick="location.reload()">üîÑ New Adventure!</button>
  </div>

<script>
let currentSubject = '';
let currentQuestion = 0;
let score = 0;
let lives = 3;
let questions = {};
let gameInterval;
let fallingAnswers = [];
let gameActive = true;

// Enhanced question bank with more engaging content
const questionBank = {
  math: {
    en: [
      {q: "üî¢ What's 2 + 2? (Easy peasy!)", options: ["3","4","5"], answer: "4"},
      {q: "üéØ Calculate: 10 - 3 = ?", options: ["7","8","9"], answer: "7"},
      {q: "‚ú® Magic multiplication: 5 √ó 2 = ?", options: ["8","10","12"], answer: "10"},
      {q: "üßÆ Brain teaser: 15 √∑ 3 = ?", options: ["4","5","6"], answer: "5"},
      {q: "üé™ Fun challenge: 8 + 7 = ?", options: ["14","15","16"], answer: "15"}
    ],
    hi: [
      {q: "üî¢ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•ã‡§ó‡§æ ‡•® + ‡•® = ? (‡§¨‡§π‡•Å‡§§ ‡§Ü‡§∏‡§æ‡§®!)", options: ["‡•©","‡•™","‡•´"], answer: "‡•™"},
      {q: "üéØ ‡§π‡§ø‡§∏‡§æ‡§¨ ‡§≤‡§ó‡§æ‡§ì: ‡•ß‡•¶ - ‡•© = ?", options: ["‡•≠","‡•Æ","‡•Ø"], answer: "‡•≠"},
      {q: "‚ú® ‡§ú‡§æ‡§¶‡•Å‡§à ‡§ó‡•Å‡§£‡§æ: ‡•´ √ó ‡•® = ?", options: ["‡•Æ","‡•ß‡•¶","‡•ß‡•®"], answer: "‡•ß‡•¶"},
      {q: "üßÆ ‡§¶‡§ø‡§Æ‡§æ‡§ó‡•Ä ‡§∏‡§µ‡§æ‡§≤: ‡•ß‡•´ √∑ ‡•© = ?", options: ["‡•™","‡•´","‡•¨"], answer: "‡•´"},
      {q: "üé™ ‡§Æ‡§ú‡•á‡§¶‡§æ‡§∞ ‡§ö‡•Å‡§®‡•å‡§§‡•Ä: ‡•Æ + ‡•≠ = ?", options: ["‡•ß‡•™","‡•ß‡•´","‡•ß‡•¨"], answer: "‡•ß‡•´"}
    ],
    or: [
      {q: "üî¢ ‡¨ï‡¨£ ‡¨π‡≠á‡¨¨ ‡≠® + ‡≠® = ? (‡¨¨‡¨π‡≠Å‡¨§ ‡¨∏‡¨π‡¨ú!)", options: ["‡≠©","‡≠™","‡≠´"], answer: "‡≠™"},
      {q: "üéØ ‡¨π‡¨ø‡¨∏‡¨æ‡¨¨ ‡¨ï‡¨∞: ‡≠ß‡≠¶ - ‡≠© = ?", options: ["‡≠≠","‡≠Æ","‡≠Ø"], answer: "‡≠≠"},
      {q: "‚ú® ‡¨Ø‡¨æ‡¨¶‡≠Å‡¨ï‡¨∞‡≠Ä ‡¨ó‡≠Å‡¨£‡¨®: ‡≠´ √ó ‡≠® = ?", options: ["‡≠Æ","‡≠ß‡≠¶","‡≠ß‡≠®"], answer: "‡≠ß‡≠¶"},
      {q: "üßÆ ‡¨Æ‡¨æ‡¨®‡¨∏‡¨ø‡¨ï ‡¨™‡≠ç‡¨∞‡¨∂‡≠ç‡¨®: ‡≠ß‡≠´ √∑ ‡≠© = ?", options: ["‡≠™","‡≠´","‡≠¨"], answer: "‡≠´"},
      {q: "üé™ ‡¨Æ‡¨ú‡¨æ‡¨≥‡¨ø‡¨Ü ‡¨ö‡≠ç‡≠ü‡¨æ‡¨≤‡≠á‡¨û‡≠ç‡¨ú: ‡≠Æ + ‡≠≠ = ?", options: ["‡≠ß‡≠™","‡≠ß‡≠´","‡≠ß‡≠¨"], answer: "‡≠ß‡≠´"}
    ]
  },
  science: {
    en: [
      {q: "üöÄ Which planet is the RED PLANET?", options: ["Earthüåç","Marsüî¥","Venusüí´"], answer: "Marsüî¥"},
      {q: "üßä At what temperature does water freeze?", options: ["0¬∞C‚ùÑÔ∏è","10¬∞C","100¬∞Cüî•"], answer: "0¬∞C‚ùÑÔ∏è"},
      {q: "üí® What gas do we breathe to live?", options: ["Oxygenüíö","CO2","Nitrogen"], answer: "Oxygenüíö"},
      {q: "‚≠ê What makes plants green?", options: ["Waterüíß","Chlorophyllüåø","Sun‚òÄÔ∏è"], answer: "Chlorophyllüåø"},
      {q: "üåô How many phases does the moon have?", options: ["4üåì","6","8üåï"], answer: "8üåï"}
    ],
    hi: [
      {q: "üöÄ ‡§ï‡•å‡§® ‡§∏‡§æ ‡§ó‡•ç‡§∞‡§π '‡§≤‡§æ‡§≤ ‡§ó‡•ç‡§∞‡§π' ‡§π‡•à?", options: ["‡§™‡•É‡§•‡•ç‡§µ‡•Äüåç","‡§Æ‡§Ç‡§ó‡§≤üî¥","‡§∂‡•Å‡§ï‡•ç‡§∞üí´"], answer: "‡§Æ‡§Ç‡§ó‡§≤üî¥"},
      {q: "üßä ‡§™‡§æ‡§®‡•Ä ‡§ï‡§ø‡§§‡§®‡•á ‡§§‡§æ‡§™‡§Æ‡§æ‡§® ‡§™‡§∞ ‡§ú‡§Æ‡§§‡§æ ‡§π‡•à?", options: ["0¬∞C‚ùÑÔ∏è","10¬∞C","100¬∞Cüî•"], answer: "0¬∞C‚ùÑÔ∏è"},
      {q: "üí® ‡§π‡§Æ ‡§ï‡•å‡§® ‡§∏‡•Ä ‡§ó‡•à‡§∏ ‡§∏‡§æ‡§Ç‡§∏ ‡§≤‡•á‡§§‡•á ‡§π‡•à‡§Ç?", options: ["‡§ë‡§ï‡•ç‡§∏‡•Ä‡§ú‡§®üíö","CO2","‡§®‡§æ‡§á‡§ü‡•ç‡§∞‡•ã‡§ú‡§®"], answer: "‡§ë‡§ï‡•ç‡§∏‡•Ä‡§ú‡§®üíö"},
      {q: "‚≠ê ‡§™‡•á‡§°‡§º-‡§™‡•å‡§ß‡•á ‡§π‡§∞‡•á ‡§ï‡•ç‡§Ø‡•ã‡§Ç ‡§π‡•ã‡§§‡•á ‡§π‡•à‡§Ç?", options: ["‡§™‡§æ‡§®‡•Äüíß","‡§ï‡•ç‡§≤‡•ã‡§∞‡•ã‡§´‡§ø‡§≤üåø","‡§∏‡•Ç‡§∞‡§ú‚òÄÔ∏è"], answer: "‡§ï‡•ç‡§≤‡•ã‡§∞‡•ã‡§´‡§ø‡§≤üåø"},
      {q: "üåô ‡§ö‡§æ‡§Ç‡§¶ ‡§ï‡•Ä ‡§ï‡§ø‡§§‡§®‡•Ä ‡§Ö‡§µ‡§∏‡•ç‡§•‡§æ‡§è‡§Ç ‡§π‡•à‡§Ç?", options: ["4üåì","6","8üåï"], answer: "8üåï"}
    ],
    or: [
      {q: "üöÄ ‡¨ï‡≠á‡¨â‡¨Å ‡¨ó‡≠ç‡¨∞‡¨π '‡¨≤‡¨æ‡¨≤ ‡¨ó‡≠ç‡¨∞‡¨π' ?", options: ["‡¨™‡≠É‡¨•‡¨ø‡¨¨‡≠Äüåç","‡¨Æ‡¨ô‡≠ç‡¨ó‡¨≥üî¥","‡¨∂‡≠Å‡¨ï‡≠ç‡¨∞üí´"], answer: "‡¨Æ‡¨ô‡≠ç‡¨ó‡¨≥üî¥"},
      {q: "üßä ‡¨™‡¨æ‡¨£‡¨ø ‡¨ï‡≠á‡¨§‡≠á ‡¨§‡¨æ‡¨™‡¨Æ‡¨æ‡¨§‡≠ç‡¨∞‡¨æ‡¨∞‡≠á ‡¨¨‡¨∞‡¨´ ‡¨π‡≠Å‡¨è?", options: ["0¬∞C‚ùÑÔ∏è","10¬∞C","100¬∞Cüî•"], answer: "0¬∞C‚ùÑÔ∏è"},
      {q: "üí® ‡¨Ü‡¨Æ‡≠á ‡¨ï‡≠á‡¨â‡¨Å ‡¨ó‡≠ç‡≠ü‡¨æ‡¨∏ ‡¨®‡¨ø‡¨∂‡≠ç‡≠±‡¨æ‡¨∏‡¨∞‡≠á ‡¨®‡¨ø‡¨Ö?", options: ["‡¨Ö‡¨Æ‡≠ç‡¨≥‡¨ú‡¨æ‡¨®üíö","CO2","‡¨®‡¨æ‡¨á‡¨ü‡≠ç‡¨∞‡≠ã‡¨ú‡≠á‡¨®"], answer: "‡¨Ö‡¨Æ‡≠ç‡¨≥‡¨ú‡¨æ‡¨®üíö"},
      {q: "‚≠ê ‡¨ó‡¨õ ‡¨∏‡¨¨‡≠Å‡¨ú ‡¨ï‡¨æ‡¨π‡¨ø‡¨Å‡¨ï‡¨ø?", options: ["‡¨™‡¨æ‡¨£‡¨øüíß","‡¨ï‡≠ç‡¨≤‡≠ã‡¨∞‡≠ã‡¨´‡¨ø‡¨≤üåø","‡¨∏‡≠Ç‡¨∞‡≠ç‡¨Ø‡≠ç‡≠ü‚òÄÔ∏è"], answer: "‡¨ï‡≠ç‡¨≤‡≠ã‡¨∞‡≠ã‡¨´‡¨ø‡¨≤üåø"},
      {q: "üåô ‡¨ö‡¨®‡≠ç‡¨¶‡≠ç‡¨∞‡¨∞ ‡¨ï‡≠á‡¨§‡≠ã‡¨ü‡¨ø ‡¨∞‡≠Ç‡¨™?", options: ["4üåì","6","8üåï"], answer: "8üåï"}
    ]
  },
  english: {
    en: [
      {q: "üìù Choose the CORRECT spelling:", options: ["Enviroment","Environment‚úÖ","Envaironment"], answer: "Environment‚úÖ"},
      {q: "üë∂ What's the plural of 'Child'?", options: ["Childs","Childrenüë•","Childrens"], answer: "Childrenüë•"},
      {q: "üòä Which word means the same as 'Happy'?", options: ["Sadüò¢","Joyfulüéâ","Angryüò†"], answer: "Joyfulüéâ"},
      {q: "üê± What sound does a cat make?", options: ["Woofüêï","Meowüê±","MooüêÑ"], answer: "Meowüê±"},
      {q: "üåà What has many colors after rain?", options: ["Cloud‚òÅÔ∏è","Rainbowüåà","Sun‚òÄÔ∏è"], answer: "Rainbowüåà"}
    ],
    hi: [
      {q: "üìù ‡§∏‡§π‡•Ä ‡§µ‡§∞‡•ç‡§§‡§®‡•Ä ‡§ö‡•Å‡§®‡•á‡§Ç:", options: ["‡§è‡§®‡§µ‡§æ‡§Ø‡§∞‡§Æ‡•á‡§Ç‡§ü","‡§è‡§®‡§µ‡§æ‡§Ø‡§∞‡§®‡§Æ‡•á‡§Ç‡§ü‚úÖ","‡§è‡§®‡§µ‡•à‡§∞‡§Æ‡•á‡§Ç‡§ü"], answer: "‡§è‡§®‡§µ‡§æ‡§Ø‡§∞‡§®‡§Æ‡•á‡§Ç‡§ü‚úÖ"},
      {q: "üë∂ '‡§¨‡§ö‡•ç‡§ö‡§æ' ‡§ï‡§æ ‡§¨‡§π‡•Å‡§µ‡§ö‡§® ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?", options: ["‡§¨‡§ö‡•ç‡§ö‡§æs","‡§¨‡§ö‡•ç‡§ö‡•áüë•","‡§¨‡§ö‡•ç‡§ö‡•ã‡§Ç"], answer: "‡§¨‡§ö‡•ç‡§ö‡•áüë•"},
      {q: "üòä '‡§ñ‡•Å‡§∂' ‡§ï‡§æ ‡§∏‡§Æ‡§æ‡§®‡§æ‡§∞‡•ç‡§•‡•Ä ‡§∂‡§¨‡•ç‡§¶?", options: ["‡§â‡§¶‡§æ‡§∏üò¢","‡§™‡•ç‡§∞‡§∏‡§®‡•ç‡§®üéâ","‡§ó‡•Å‡§∏‡•ç‡§∏‡§æüò†"], answer: "‡§™‡•ç‡§∞‡§∏‡§®‡•ç‡§®üéâ"},
      {q: "üê± ‡§¨‡§ø‡§≤‡•ç‡§≤‡•Ä ‡§ï‡•à‡§∏‡•Ä ‡§Ü‡§µ‡§æ‡§ú‡§º ‡§ï‡§∞‡§§‡•Ä ‡§π‡•à?", options: ["‡§≠‡•å‡§Çüêï","‡§Æ‡•ç‡§Ø‡§æ‡§ä‡§Çüê±","‡§Æ‡•ÇüêÑ"], answer: "‡§Æ‡•ç‡§Ø‡§æ‡§ä‡§Çüê±"},
      {q: "üåà ‡§¨‡§æ‡§∞‡§ø‡§∂ ‡§ï‡•á ‡§¨‡§æ‡§¶ ‡§Ü‡§ï‡§æ‡§∂ ‡§Æ‡•á‡§Ç ‡§ï‡•ç‡§Ø‡§æ ‡§¶‡§ø‡§ñ‡§§‡§æ ‡§π‡•à?", options: ["‡§¨‡§æ‡§¶‡§≤‚òÅÔ∏è","‡§á‡§Ç‡§¶‡•ç‡§∞‡§ß‡§®‡•Å‡§∑üåà","‡§∏‡•Ç‡§∞‡§ú‚òÄÔ∏è"], answer: "‡§á‡§Ç‡§¶‡•ç‡§∞‡§ß‡§®‡•Å‡§∑üåà"}
    ],
    or: [
      {q: "üìù ‡¨∏‡¨†‡¨ø‡¨ï‡≠ç ‡¨¨‡¨®‡¨æ‡¨® ‡¨¨‡¨æ‡¨õ‡¨®‡≠ç‡¨§‡≠Å:", options: ["‡¨è‡¨®‡¨≠‡¨æ‡≠ü‡¨∞‡¨Æ‡≠á‡¨£‡≠ç‡¨ü","‡¨è‡¨®‡¨≠‡¨æ‡≠ü‡¨∞‡¨®‡¨Æ‡≠á‡¨£‡≠ç‡¨ü‚úÖ","‡¨è‡¨®‡¨≠‡≠à‡¨∞‡¨Æ‡≠á‡¨£‡≠ç‡¨ü"], answer: "‡¨è‡¨®‡¨≠‡¨æ‡≠ü‡¨∞‡¨®‡¨Æ‡≠á‡¨£‡≠ç‡¨ü‚úÖ"},
      {q: "üë∂ '‡¨™‡¨ø‡¨≤‡¨æ'‡¨∞ ‡¨¨‡¨π‡≠Å‡¨¨‡¨ö‡¨® ‡¨ï‡¨£?", options: ["‡¨™‡¨ø‡¨≤‡¨æs","‡¨™‡¨ø‡¨≤‡¨æ‡¨Æ‡¨æ‡¨®‡≠áüë•","‡¨™‡¨ø‡¨≤‡¨æ‡¨Æ‡¨æ‡¨®‡¨ô‡≠ç‡¨ï"], answer: "‡¨™‡¨ø‡¨≤‡¨æ‡¨Æ‡¨æ‡¨®‡≠áüë•"},
      {q: "üòä '‡¨ñ‡≠Å‡¨∏‡¨ø'‡¨∞ ‡¨∏‡¨Æ‡¨æ‡¨®‡¨æ‡¨∞‡≠ç‡¨•‡¨ï?", options: ["‡¨¶‡≠Å‡¨É‡¨ñ‡≠Äüò¢","‡¨Ü‡¨®‡¨®‡≠ç‡¨¶‡¨ø‡¨§üéâ","‡¨∞‡¨æ‡¨ó‡≠Äüò†"], answer: "‡¨Ü‡¨®‡¨®‡≠ç‡¨¶‡¨ø‡¨§üéâ"},
      {q: "üê± ‡¨¨‡¨ø‡¨≤‡≠á‡¨á ‡¨ï‡¨ø‡¨™‡¨∞‡¨ø ‡¨∂‡¨¨‡≠ç‡¨¶ ‡¨ï‡¨∞‡≠á?", options: ["‡¨π‡¨âüêï","‡¨Æ‡¨ø‡¨Ü‡¨â‡¨Åüê±","‡¨Æ‡≠ãüêÑ"], answer: "‡¨Æ‡¨ø‡¨Ü‡¨â‡¨Åüê±"},
      {q: "üåà ‡¨¨‡¨∞‡≠ç‡¨∑‡¨æ ‡¨™‡¨∞‡≠á ‡¨Ü‡¨ï‡¨æ‡¨∂‡¨∞‡≠á ‡¨ï‡¨£ ‡¨¶‡≠á‡¨ñ‡¨æ‡¨Ø‡¨æ‡¨è?", options: ["‡¨Æ‡≠á‡¨ò‚òÅÔ∏è","‡¨á‡¨®‡≠ç‡¨¶‡≠ç‡¨∞‡¨ß‡¨®‡≠Åüåà","‡¨∏‡≠Ç‡¨∞‡≠ç‡¨Ø‡≠ç‡≠ü‚òÄÔ∏è"], answer: "‡¨á‡¨®‡≠ç‡¨¶‡≠ç‡¨∞‡¨ß‡¨®‡≠Åüåà"}
    ]
  }
};

// Sound effects using Web Audio API
function playSound(frequency, duration, type = 'sine') {
  try {
    const audioContext = new (window.AudioContext || window.webkitAudioContext)();
    const oscillator = audioContext.createOscillator();
    const gainNode = audioContext.createGain();
    
    oscillator.connect(gainNode);
    gainNode.connect(audioContext.destination);
    
    oscillator.frequency.value = frequency;
    oscillator.type = type;
    
    gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + duration);
    
    oscillator.start(audioContext.currentTime);
    oscillator.stop(audioContext.currentTime + duration);
  } catch (e) {
    console.log("Audio not supported");
  }
}

// Enhanced sound effects
function playCorrectSound() {
  playSound(523, 0.2); // C note
  setTimeout(() => playSound(659, 0.2), 100); // E note
  setTimeout(() => playSound(784, 0.3), 200); // G note
}

function playWrongSound() {
  playSound(200, 0.5, 'sawtooth');
}

function playGameStartSound() {
  playSound(440, 0.1);
  setTimeout(() => playSound(554, 0.1), 100);
  setTimeout(() => playSound(659, 0.2), 200);
}

function playLevelCompleteSound() {
  for(let i = 0; i < 5; i++) {
    setTimeout(() => playSound(523 + i * 50, 0.1), i * 100);
  }
}

// Add floating emojis for visual effect
function createFloatingEmoji(emoji, x, y) {
  const emojiElement = document.createElement('div');
  emojiElement.className = 'floating-emoji';
  emojiElement.innerText = emoji;
  emojiElement.style.left = x + 'px';
  emojiElement.style.top = y + 'px';
  document.body.appendChild(emojiElement);
  
  setTimeout(() => {
    emojiElement.remove();
  }, 3000);
}

// Show celebration animation
function showCelebration(type) {
  const celebrationDiv = document.createElement('div');
  celebrationDiv.className = 'celebration';
  
  if(type === 'correct') {
    celebrationDiv.innerText = 'üéâ';
    createFloatingEmoji('‚≠ê', Math.random() * window.innerWidth, Math.random() * 200);
    createFloatingEmoji('üåü', Math.random() * window.innerWidth, Math.random() * 200);
  } else if(type === 'wrong') {
    celebrationDiv.innerText = 'üòÖ';
    createFloatingEmoji('üí´', Math.random() * window.innerWidth, Math.random() * 200);
  } else if(type === 'complete') {
    celebrationDiv.innerText = 'üèÜ';
    for(let i = 0; i < 10; i++) {
      setTimeout(() => {
        createFloatingEmoji('üéä', Math.random() * window.innerWidth, Math.random() * 300);
      }, i * 100);
    }
  }
  
  document.body.appendChild(celebrationDiv);
  setTimeout(() => celebrationDiv.remove(), 1000);
}

// Start game with enhanced effects
function startGame(subject) {
  playGameStartSound();
  currentSubject = subject;
  currentQuestion = 0;
  score = 0;
  lives = 3;
  gameActive = true;
  questions = questionBank[subject][document.getElementById('language').value];
  
  const subjectEmojis = {
    'math': 'üî¢ MATH MAGIC QUEST! üéØ',
    'science': 'üî¨ SCIENCE ADVENTURE! üöÄ',
    'english': 'üìö WORD WIZARD CHALLENGE! ‚ú®'
  };
  
  document.getElementById('subjectTitle').innerText = subjectEmojis[subject];
  document.getElementById('gameBox').style.display = 'block';
  document.getElementById('teacherDashboard').style.display = 'none';
  document.getElementById('educationalBox').style.display = 'none';
  updateGameStats();
  loadQuestion();
  
  // Add some celebration emojis when starting
  for(let i = 0; i < 5; i++) {
    setTimeout(() => {
      createFloatingEmoji('üéÆ', Math.random() * window.innerWidth, Math.random() * 200);
    }, i * 200);
  }
}

// Change language mid-game
function changeLanguage() {
  if(currentSubject) {
    questions = questionBank[currentSubject][document.getElementById('language').value];
    stopFalling();
    loadQuestion();
  }
}

// Enhanced game statistics display
function updateGameStats() {
  const heartsArray = ['üíñ', 'üíù', 'üíó', 'üíï', 'üíì'];
  const starsArray = ['‚≠ê', 'üåü', '‚ú®', 'üéÜ', 'üéá'];
  
  document.getElementById('livesDisplay').innerHTML = 
    heartsArray[lives % heartsArray.length] + ' Lives: ' + lives;
  document.getElementById('pointsDisplay').innerHTML = 
    starsArray[score % starsArray.length] + ' Score: ' + score;
}

// Enhanced question loading with motivational text
function loadQuestion() {
  stopFalling();
  gameActive = true;
  document.getElementById('educationalBox').style.display = 'none';
  
  if(currentQuestion < questions.length && lives > 0) {
    const motivationalPrefixes = [
      "üéØ Ready for this? ", "üöÄ Here comes a fun one! ", "‚ö° Quick thinking needed! ",
      "üåü You've got this! ", "üé™ Challenge time! "
    ];
    
    const prefix = motivationalPrefixes[currentQuestion % motivationalPrefixes.length];
    document.getElementById('questionBox').innerText = prefix + questions[currentQuestion].q;
    document.getElementById('scoreBox').innerText = '';
    startFallingAnswers();
  } else if(lives <= 0) {
    playWrongSound();
    document.getElementById('scoreBox').innerHTML = "üíÄ Game Over! But hey, you tried! üåü<br>Final Score: " + score + "/" + questions.length;
    document.getElementById('questionBox').innerText = 'üîÑ Ready to try again? You can do better! üí™';
    showCelebration('wrong');
  } else {
    playLevelCompleteSound();
    document.getElementById('scoreBox').innerHTML = "üéâ AMAZING! You're a CHAMPION! üèÜ<br>Perfect Score: " + score + "/" + questions.length;
    document.getElementById('questionBox').innerText = 'üëë You are absolutely INCREDIBLE! üéä';
    showCelebration('complete');
  }
}

// Plain falling answers - no special colors initially
function startFallingAnswers() {
  const container = document.getElementById('gameContainer');
  container.innerHTML = '';
  fallingAnswers = [];
  
  const currentQ = questions[currentQuestion];
  const containerWidth = container.offsetWidth;
  
  currentQ.options.forEach((option, index) => {
    const answerDiv = document.createElement('div');
    answerDiv.className = 'fallingAnswer'; // All answers look the same initially
    answerDiv.innerText = option;
    answerDiv.style.left = (index * (containerWidth / currentQ.options.length) + 30) + 'px';
    answerDiv.style.top = '-50px';
    
    // NO special styling for correct answer initially
    
    answerDiv.onclick = () => {
      if(gameActive) {
        catchAnswer(option, answerDiv);
      }
    };
    
    container.appendChild(answerDiv);
    fallingAnswers.push({element: answerDiv, answer: option});
  });
  
  gameInterval = setInterval(moveAnswers, 40);
}

// Enhanced answer movement
function moveAnswers() {
  if(!gameActive) return;
  
  const container = document.getElementById('gameContainer');
  const containerHeight = container.offsetHeight;
  
  fallingAnswers.forEach((item, index) => {
    const currentTop = parseInt(item.element.style.top) || 0;
    const newTop = currentTop + 4;
    
    if(newTop > containerHeight - 60) {
      if(item.answer === questions[currentQuestion].answer) {
        lives--;
        updateGameStats();
        playWrongSound();
        document.getElementById('scoreBox').innerHTML = 'üò± Oops! The correct answer escaped! Try to catch it faster next time! ‚ö°';
        showCelebration('wrong');
        if(lives <= 0) {
          gameActive = false;
          stopFalling();
          setTimeout(() => loadQuestion(), 2000);
          return;
        }
      }
      item.element.remove();
      fallingAnswers.splice(index, 1);
    } else {
      item.element.style.top = newTop + 'px';
    }
  });
  
  if(fallingAnswers.length === 0) {
    stopFalling();
  }
}

// NEW: Reveal correct answer ONLY when wrong answer is clicked
function revealCorrectAnswerOnMistake() {
  const currentQ = questions[currentQuestion];
  
  // Highlight all answers to show which was correct
  fallingAnswers.forEach(item => {
    const element = item.element;
    
    if(item.answer === currentQ.answer) {
      // Highlight the correct answer in bright green
      element.classList.add('revealedCorrectAnswer');
      element.classList.remove('fallingAnswer');
      
      // Add educational message
      setTimeout(() => {
        const educationalBox = document.getElementById('educationalBox');
        educationalBox.innerHTML = `
          <strong>üìö Learn:</strong> The correct answer was <strong>"${currentQ.answer}"</strong> 
          <br>‚úÖ Now you know! Remember this for next time! üß†
        `;
        educationalBox.style.display = 'block';
      }, 1000);
      
    } else {
      // Make wrong answers fade out
      element.classList.add('revealedWrongAnswer');
      element.classList.remove('fallingAnswer');
    }
    
    // Stop any further clicking
    element.onclick = null;
  });
}

// Enhanced answer catching - reveal ONLY on wrong answer
function catchAnswer(selected, element) {
  if(!gameActive) return;
  
  gameActive = false;
  stopFalling();
  
  const encouragingMessages = [
    "üåü Fantastic! ", "üöÄ Brilliant! ", "‚≠ê Excellent! ", "üéØ Perfect! ", "üéâ Amazing! "
  ];
  
  const tryAgainMessages = [
    "üòä Almost! ", "üí™ Good try! ", "üåü Close one! ", "üéØ Nice attempt! ", "üí´ Keep going! "
  ];
  
  if(selected === questions[currentQuestion].answer) {
    // CORRECT ANSWER - just celebrate, no reveal needed
    score++;
    playCorrectSound();
    showCelebration('correct');
    const message = encouragingMessages[Math.floor(Math.random() * encouragingMessages.length)];
    document.getElementById('scoreBox').innerHTML = message + 'You caught the right answer! +1 point! üéä';
    
    // Just make the correct answer glow
    element.classList.add('clickedCorrectAnswer');
    element.classList.remove('fallingAnswer');
    
    // Add sparkle effect
    createFloatingEmoji('‚ú®', element.offsetLeft, element.offsetTop);
    createFloatingEmoji('‚≠ê', element.offsetLeft + 50, element.offsetTop);
    
  } else {
    // WRONG ANSWER - NOW reveal the correct answer
    lives--;
    playWrongSound();
    showCelebration('wrong');
    const message = tryAgainMessages[Math.floor(Math.random() * tryAgainMessages.length)];
    document.getElementById('scoreBox').innerHTML = 
      message + `Wrong choice! Let me show you the correct answer! üí™`;
    
    // Make clicked wrong answer shake
    element.classList.add('clickedWrongAnswer');
    element.classList.remove('fallingAnswer');
    
    // NOW reveal the correct answer in green
    revealCorrectAnswerOnMistake();
  }
  
  updateGameStats();
  
  // Clear clicking for all answers
  fallingAnswers.forEach(item => {
    item.element.onclick = null;
  });
}

function stopFalling() {
  if(gameInterval) {
    clearInterval(gameInterval);
    gameInterval = null;
  }
}

function nextQuestion() {
  if(lives > 0) {
    currentQuestion++;
    loadQuestion();
    playSound(440, 0.1); // Next question sound
  }
}

// Enhanced dashboard with badges
function showDashboard() {
  stopFalling();
  document.getElementById('gameBox').style.display = 'none';
  document.getElementById('teacherDashboard').style.display = 'block';
  document.getElementById('yourSub').innerText = currentSubject.toUpperCase() + ' MASTER!';
  document.getElementById('yourScore').innerText = score + "/" + questions.length;
  
  // Determine badge based on performance
  let badge = '';
  const percentage = (score / questions.length) * 100;
  if(percentage === 100) badge = 'üèÜ LEGEND!';
  else if(percentage >= 80) badge = 'ü•á CHAMPION!';
  else if(percentage >= 60) badge = 'ü•à STAR!';
  else if(percentage >= 40) badge = 'ü•â FIGHTER!';
  else badge = 'üåü LEARNER!';
  
  document.getElementById('yourBadge').innerText = badge;
  
  playLevelCompleteSound();
  showCelebration('complete');
}

// Add some floating emojis on page load
window.addEventListener('load', () => {
  const welcomeEmojis = ['üéÆ', 'üìö', 'üåü', 'üöÄ', 'üéØ', 'üéä'];
  for(let i = 0; i < 8; i++) {
    setTimeout(() => {
      const emoji = welcomeEmojis[Math.floor(Math.random() * welcomeEmojis.length)];
      createFloatingEmoji(emoji, Math.random() * window.innerWidth, Math.random() * 300);
    }, i * 500);
  }
});

</script>

</body>
</html>