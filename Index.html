<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ğŸ® Super Learning Adventure - Catch the Answer!</title>
  <style>
    body {
      font-family: 'Comic Sans MS', cursive, Arial, sans-serif;
      background: linear-gradient(45deg, #ff6b6b, #4ecdc4, #45b7d1, #96ceb4);
      background-size: 400% 400%;
      animation: gradientShift 8s ease infinite;
      text-align: center;
      padding: 20px;
      margin: 0;
      min-height: 100vh;
    }
    
    @keyframes gradientShift {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
    
    h1 { 
      color: #2c3e50; 
      font-size: 2.5em;
      text-shadow: 3px 3px 6px rgba(0,0,0,0.3);
      animation: bounce 2s infinite;
    }
    
    @keyframes bounce {
      0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
      40% { transform: translateY(-10px); }
      60% { transform: translateY(-5px); }
    }
    
    .btn {
      background: linear-gradient(45deg, #3498db, #2980b9);
      color: white;
      border: none;
      padding: 15px 25px;
      margin: 8px;
      border-radius: 25px;
      cursor: pointer;
      font-size: 18px;
      font-weight: bold;
      box-shadow: 0 8px 15px rgba(0,0,0,0.2);
      transition: all 0.3s ease;
      text-transform: uppercase;
    }
    
    .btn:hover { 
      background: linear-gradient(45deg, #2980b9, #3498db);
      transform: translateY(-3px);
      box-shadow: 0 12px 20px rgba(0,0,0,0.3);
    }
    
    .btn:active {
      transform: translateY(0);
      box-shadow: 0 5px 10px rgba(0,0,0,0.2);
    }
    
    #gameBox, #teacherDashboard { display: none; }
    
    .question { 
      font-size: 28px; 
      margin: 20px 0; 
      font-weight: bold;
      color: #2c3e50;
      background: rgba(255,255,255,0.9);
      padding: 20px;
      border-radius: 20px;
      box-shadow: 0 10px 25px rgba(0,0,0,0.1);
      animation: pulse 2s infinite;
    }
    
    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.02); }
      100% { transform: scale(1); }
    }
    
    .score { 
      font-size: 24px; 
      color: #27ae60; 
      margin-top: 20px; 
      font-weight: bold;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
    }
    
    .dashboard {
      background: rgba(255,255,255,0.95); 
      padding: 25px; 
      border-radius: 20px;
      box-shadow: 0 15px 35px rgba(0,0,0,0.1);
      margin: 15px auto;
      width: 70%;
    }
    
    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 16px;
    }
    
    th, td {
      padding: 12px;
      border: 2px solid #ecf0f1;
      text-align: center;
    }
    
    th {
      background: linear-gradient(45deg, #3498db, #2980b9);
      color: white;
      font-weight: bold;
    }
    
    /* Enhanced Game Container */
    #gameContainer {
      position: relative;
      width: 85%;
      height: 450px;
      margin: 25px auto;
      border: 5px solid #3498db;
      border-radius: 25px;
      background: linear-gradient(to bottom, #87CEEB 0%, #98FB98 50%, #FFE4B5 100%);
      overflow: hidden;
      box-shadow: 0 15px 30px rgba(0,0,0,0.2);
    }
    
    /* PLAIN ANSWERS - No special colors initially */
    .fallingAnswer {
      position: absolute;
      background: linear-gradient(45deg, #95a5a6, #7f8c8d);
      color: white;
      padding: 12px 18px;
      border-radius: 20px;
      cursor: pointer;
      font-weight: bold;
      font-size: 20px;
      min-width: 100px;
      text-align: center;
      box-shadow: 0 8px 16px rgba(0,0,0,0.3);
      transition: all 0.3s ease;
      border: 3px solid #fff;
      animation: sparkle 2s infinite;
    }
    
    @keyframes sparkle {
      0%, 100% { box-shadow: 0 8px 16px rgba(0,0,0,0.3); }
      50% { box-shadow: 0 8px 16px rgba(0,0,0,0.3), 0 0 20px rgba(255,255,255,0.8); }
    }
    
    .fallingAnswer:hover {
      transform: scale(1.15) rotate(5deg);
      background: linear-gradient(45deg, #7f8c8d, #95a5a6);
    }
    
    /* Styles for when answers are revealed (only after wrong answer) */
    .revealedCorrectAnswer {
      background: linear-gradient(45deg, #27ae60, #2ecc71) !important;
      transform: scale(1.2) !important;
      animation: correctReveal 2s ease-in-out !important;
      border: 4px solid #f1c40f !important;
      box-shadow: 0 0 30px rgba(39,174,96,0.8) !important;
    }
    
    .revealedWrongAnswer {
      background: linear-gradient(45deg, #e74c3c, #c0392b) !important;
      transform: scale(0.9) !important;
      opacity: 0.7;
      animation: wrongReveal 1s ease-out !important;
    }
    
    .clickedCorrectAnswer {
      background: linear-gradient(45deg, #27ae60, #2ecc71) !important;
      transform: scale(1.3) rotate(360deg) !important;
      border: 4px solid #f39c12 !important;
      box-shadow: 0 0 40px rgba(39,174,96,1) !important;
    }
    
    .clickedWrongAnswer {
      background: linear-gradient(45deg, #e74c3c, #c0392b) !important;
      transform: scale(0.8) rotate(-180deg) !important;
      opacity: 0.8;
    }
    
    @keyframes correctReveal {
      0% { transform: scale(1); }
      50% { transform: scale(1.3) rotate(10deg); }
      100% { transform: scale(1.2) rotate(0deg); }
    }
    
    @keyframes wrongReveal {
      0% { opacity: 1; }
      100% { opacity: 0.7; }
    }
    
    .gameStats {
      display: flex;
      justify-content: space-around;
      margin: 15px 0;
      font-size: 22px;
      font-weight: bold;
    }
    
    .lives {
      color: #e74c3c;
      background: rgba(255,255,255,0.9);
      padding: 10px 20px;
      border-radius: 15px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }
    
    .points {
      color: #27ae60;
      background: rgba(255,255,255,0.9);
      padding: 10px 20px;
      border-radius: 15px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }
    
    .celebration {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 4em;
      z-index: 1000;
      animation: celebrate 1s ease-out;
    }
    
    @keyframes celebrate {
      0% { transform: translate(-50%, -50%) scale(0); opacity: 0; }
      50% { transform: translate(-50%, -50%) scale(1.2); opacity: 1; }
      100% { transform: translate(-50%, -50%) scale(1); opacity: 0; }
    }
    
    .intro-text {
      font-size: 20px;
      color: #2c3e50;
      background: rgba(255,255,255,0.9);
      padding: 15px;
      border-radius: 15px;
      margin: 20px auto;
      width: 80%;
      box-shadow: 0 8px 20px rgba(0,0,0,0.1);
    }
    
    .language-selector {
      background: rgba(255,255,255,0.9);
      padding: 15px;
      border-radius: 15px;
      margin: 20px auto;
      width: fit-content;
      box-shadow: 0 8px 20px rgba(0,0,0,0.1);
    }
    
    select {
      padding: 10px 15px;
      font-size: 16px;
      border-radius: 10px;
      border: 2px solid #3498db;
      background: white;
    }
    
    .floating-emoji {
      position: absolute;
      font-size: 2em;
      animation: float 3s ease-in-out infinite;
      pointer-events: none;
    }
    
    @keyframes float {
      0%, 100% { transform: translateY(0px) rotate(0deg); }
      50% { transform: translateY(-20px) rotate(180deg); }
    }

    /* Educational message box */
    .educationalMessage {
      background: rgba(255,255,255,0.95);
      padding: 20px;
      border-radius: 15px;
      margin: 20px auto;
      width: 80%;
      box-shadow: 0 10px 25px rgba(0,0,0,0.2);
      font-size: 18px;
      font-weight: bold;
      border-left: 6px solid #3498db;
    }
  </style>
</head>
<body>

  <h1>ğŸ® Super Learning Adventure! ğŸŒŸ</h1>
  <div class="intro-text">
    ğŸš€ Welcome to the most FUN way to learn! ğŸ¯ Choose your subject and catch the falling answers! 
    <br>ğŸª Get ready for an EPIC learning adventure! ğŸŠ
  </div>

  <!-- Subject Selection with enhanced styling -->
  <div style="margin: 30px 0;">
    <h2>ğŸ¯ Choose Your Learning Quest!</h2>
    <button class="btn" onclick="startGame('math')">ğŸ”¢ Math Magic</button>
    <button class="btn" onclick="startGame('science')">ğŸ”¬ Science Explorer</button>
    <button class="btn" onclick="startGame('english')">ğŸ“š Word Wizard</button>
  </div>

  <!-- Language Switch -->
  <div class="language-selector">
    <label for="language">ğŸŒ Select Language / à¤­à¤¾à¤·à¤¾ à¤šà¥à¤¨à¥‡à¤‚ / à¬­à¬¾à¬·à¬¾ à¬¬à¬¾à¬›à¬¨à­à¬¤à­: </label>
    <select id="language" onchange="changeLanguage()">
      <option value="en">ğŸ‡¬ğŸ‡§ English</option>
      <option value="hi">ğŸ‡®ğŸ‡³ à¤¹à¤¿à¤¨à¥à¤¦à¥€</option>
      <option value="or">ğŸ‡®ğŸ‡³ à¬“à¬¡à¬¼à¬¿à¬†</option>
    </select>
  </div>

  <!-- Game Box -->
  <div id="gameBox">
    <h2 id="subjectTitle"></h2>
    
    <div class="gameStats">
      <div class="lives" id="livesDisplay">â¤ï¸ Lives: 3</div>
      <div class="points" id="pointsDisplay">â­ Score: 0</div>
    </div>
    
    <div id="questionBox" class="question"></div>
    <div id="gameContainer"></div>
    
    <div id="scoreBox" class="score"></div>
    <div id="educationalBox" class="educationalMessage" style="display: none;"></div>
    
    <button class="btn" onclick="nextQuestion()">â¡ï¸ Next Challenge!</button>
    <br><br>
    <button class="btn" onclick="showDashboard()">ğŸ‘©â€ğŸ« Teacher's Magic Board</button>
  </div>

  <!-- Enhanced Teacher Dashboard -->
  <div id="teacherDashboard">
    <h2>ğŸ“Š ğŸ‰ Super Teacher Dashboard ğŸ‰</h2>
    <div class="dashboard">
      <h3>ğŸ† Student Hall of Fame ğŸŒŸ</h3>
      <table>
        <tr><th>ğŸ§‘â€ğŸ“ Student Hero</th><th>ğŸ“– Subject Quest</th><th>â­ Achievement Score</th><th>ğŸ–ï¸ Badge</th></tr>
        <tr><td>Ravi ğŸš€</td><td>Math Magic</td><td>2/3</td><td>ğŸ¥ˆ Silver Star</td></tr>
        <tr><td>Sita ğŸŒŸ</td><td>Science Explorer</td><td>3/3</td><td>ğŸ¥‡ Gold Champion</td></tr>
        <tr><td>Arun ğŸ“š</td><td>Word Wizard</td><td>1/3</td><td>ğŸ¥‰ Bronze Learner</td></tr>
        <tr style="background: #f39c12; color: white;"><td><b>ğŸ¯ YOU! ğŸ¯</b></td><td id="yourSub"></td><td id="yourScore"></td><td id="yourBadge"></td></tr>
      </table>
    </div>
    <br>
    <button class="btn" onclick="location.reload()">ğŸ”„ New Adventure!</button>
  </div>

<script>
let currentSubject = '';
let currentQuestion = 0;
let score = 0;
let lives = 3;
let questions = {};
let gameInterval;
let fallingAnswers = [];
let gameActive = true;

// Enhanced question bank with more engaging content
const questionBank = {
  math: {
    en: [
      {q: "ğŸ”¢ What's 2 + 2? (Easy peasy!)", options: ["3","4","5"], answer: "4"},
      {q: "ğŸ¯ Calculate: 10 - 3 = ?", options: ["7","8","9"], answer: "7"},
      {q: "âœ¨ Magic multiplication: 5 Ã— 2 = ?", options: ["8","10","12"], answer: "10"},
      {q: "ğŸ§® Brain teaser: 15 Ã· 3 = ?", options: ["4","5","6"], answer: "5"},
      {q: "ğŸª Fun challenge: 8 + 7 = ?", options: ["14","15","16"], answer: "15"}
    ],
    hi: [
      {q: "ğŸ”¢ à¤•à¥à¤¯à¤¾ à¤¹à¥‹à¤—à¤¾ à¥¨ + à¥¨ = ? (à¤¬à¤¹à¥à¤¤ à¤†à¤¸à¤¾à¤¨!)", options: ["à¥©","à¥ª","à¥«"], answer: "à¥ª"},
      {q: "ğŸ¯ à¤¹à¤¿à¤¸à¤¾à¤¬ à¤²à¤—à¤¾à¤“: à¥§à¥¦ - à¥© = ?", options: ["à¥­","à¥®","à¥¯"], answer: "à¥­"},
      {q: "âœ¨ à¤œà¤¾à¤¦à¥à¤ˆ à¤—à¥à¤£à¤¾: à¥« Ã— à¥¨ = ?", options: ["à¥®","à¥§à¥¦","à¥§à¥¨"], answer: "à¥§à¥¦"},
      {q: "ğŸ§® à¤¦à¤¿à¤®à¤¾à¤—à¥€ à¤¸à¤µà¤¾à¤²: à¥§à¥« Ã· à¥© = ?", options: ["à¥ª","à¥«","à¥¬"], answer: "à¥«"},
      {q: "ğŸª à¤®à¤œà¥‡à¤¦à¤¾à¤° à¤šà¥à¤¨à¥Œà¤¤à¥€: à¥® + à¥­ = ?", options: ["à¥§à¥ª","à¥§à¥«","à¥§à¥¬"], answer: "à¥§à¥«"}
    ],
    or: [
      {q: "ğŸ”¢ à¬•à¬£ à¬¹à­‡à¬¬ à­¨ + à­¨ = ? (à¬¬à¬¹à­à¬¤ à¬¸à¬¹à¬œ!)", options: ["à­©","à­ª","à­«"], answer: "à­ª"},
      {q: "ğŸ¯ à¬¹à¬¿à¬¸à¬¾à¬¬ à¬•à¬°: à­§à­¦ - à­© = ?", options: ["à­­","à­®","à­¯"], answer: "à­­"},
      {q: "âœ¨ à¬¯à¬¾à¬¦à­à¬•à¬°à­€ à¬—à­à¬£à¬¨: à­« Ã— à­¨ = ?", options: ["à­®","à­§à­¦","à­§à­¨"], answer: "à­§à­¦"},
      {q: "ğŸ§® à¬®à¬¾à¬¨à¬¸à¬¿à¬• à¬ªà­à¬°à¬¶à­à¬¨: à­§à­« Ã· à­© = ?", options: ["à­ª","à­«","à­¬"], answer: "à­«"},
      {q: "ğŸª à¬®à¬œà¬¾à¬³à¬¿à¬† à¬šà­à­Ÿà¬¾à¬²à­‡à¬à­à¬œ: à­® + à­­ = ?", options: ["à­§à­ª","à­§à­«","à­§à­¬"], answer: "à­§à­«"}
    ]
  },
  science: {
    en: [
      {q: "ğŸš€ Which planet is the RED PLANET?", options: ["EarthğŸŒ","MarsğŸ”´","VenusğŸ’«"], answer: "MarsğŸ”´"},
      {q: "ğŸ§Š At what temperature does water freeze?", options: ["0Â°Câ„ï¸","10Â°C","100Â°CğŸ”¥"], answer: "0Â°Câ„ï¸"},
      {q: "ğŸ’¨ What gas do we breathe to live?", options: ["OxygenğŸ’š","CO2","Nitrogen"], answer: "OxygenğŸ’š"},
      {q: "â­ What makes plants green?", options: ["WaterğŸ’§","ChlorophyllğŸŒ¿","Sunâ˜€ï¸"], answer: "ChlorophyllğŸŒ¿"},
      {q: "ğŸŒ™ How many phases does the moon have?", options: ["4ğŸŒ“","6","8ğŸŒ•"], answer: "8ğŸŒ•"}
    ],
    hi: [
      {q: "ğŸš€ à¤•à¥Œà¤¨ à¤¸à¤¾ à¤—à¥à¤°à¤¹ 'à¤²à¤¾à¤² à¤—à¥à¤°à¤¹' à¤¹à¥ˆ?", options: ["à¤ªà¥ƒà¤¥à¥à¤µà¥€ğŸŒ","à¤®à¤‚à¤—à¤²ğŸ”´","à¤¶à¥à¤•à¥à¤°ğŸ’«"], answer: "à¤®à¤‚à¤—à¤²ğŸ”´"},
      {q: "ğŸ§Š à¤ªà¤¾à¤¨à¥€ à¤•à¤¿à¤¤à¤¨à¥‡ à¤¤à¤¾à¤ªà¤®à¤¾à¤¨ à¤ªà¤° à¤œà¤®à¤¤à¤¾ à¤¹à¥ˆ?", options: ["0Â°Câ„ï¸","10Â°C","100Â°CğŸ”¥"], answer: "0Â°Câ„ï¸"},
      {q: "ğŸ’¨ à¤¹à¤® à¤•à¥Œà¤¨ à¤¸à¥€ à¤—à¥ˆà¤¸ à¤¸à¤¾à¤‚à¤¸ à¤²à¥‡à¤¤à¥‡ à¤¹à¥ˆà¤‚?", options: ["à¤‘à¤•à¥à¤¸à¥€à¤œà¤¨ğŸ’š","CO2","à¤¨à¤¾à¤‡à¤Ÿà¥à¤°à¥‹à¤œà¤¨"], answer: "à¤‘à¤•à¥à¤¸à¥€à¤œà¤¨ğŸ’š"},
      {q: "â­ à¤ªà¥‡à¤¡à¤¼-à¤ªà¥Œà¤§à¥‡ à¤¹à¤°à¥‡ à¤•à¥à¤¯à¥‹à¤‚ à¤¹à¥‹à¤¤à¥‡ à¤¹à¥ˆà¤‚?", options: ["à¤ªà¤¾à¤¨à¥€ğŸ’§","à¤•à¥à¤²à¥‹à¤°à¥‹à¤«à¤¿à¤²ğŸŒ¿","à¤¸à¥‚à¤°à¤œâ˜€ï¸"], answer: "à¤•à¥à¤²à¥‹à¤°à¥‹à¤«à¤¿à¤²ğŸŒ¿"},
      {q: "ğŸŒ™ à¤šà¤¾à¤‚à¤¦ à¤•à¥€ à¤•à¤¿à¤¤à¤¨à¥€ à¤…à¤µà¤¸à¥à¤¥à¤¾à¤à¤‚ à¤¹à¥ˆà¤‚?", options: ["4ğŸŒ“","6","8ğŸŒ•"], answer: "8ğŸŒ•"}
    ],
    or: [
      {q: "ğŸš€ à¬•à­‡à¬‰à¬ à¬—à­à¬°à¬¹ 'à¬²à¬¾à¬² à¬—à­à¬°à¬¹' ?", options: ["à¬ªà­ƒà¬¥à¬¿à¬¬à­€ğŸŒ","à¬®à¬™à­à¬—à¬³ğŸ”´","à¬¶à­à¬•à­à¬°ğŸ’«"], answer: "à¬®à¬™à­à¬—à¬³ğŸ”´"},
      {q: "ğŸ§Š à¬ªà¬¾à¬£à¬¿ à¬•à­‡à¬¤à­‡ à¬¤à¬¾à¬ªà¬®à¬¾à¬¤à­à¬°à¬¾à¬°à­‡ à¬¬à¬°à¬« à¬¹à­à¬?", options: ["0Â°Câ„ï¸","10Â°C","100Â°CğŸ”¥"], answer: "0Â°Câ„ï¸"},
      {q: "ğŸ’¨ à¬†à¬®à­‡ à¬•à­‡à¬‰à¬ à¬—à­à­Ÿà¬¾à¬¸ à¬¨à¬¿à¬¶à­à­±à¬¾à¬¸à¬°à­‡ à¬¨à¬¿à¬…?", options: ["à¬…à¬®à­à¬³à¬œà¬¾à¬¨ğŸ’š","CO2","à¬¨à¬¾à¬‡à¬Ÿà­à¬°à­‹à¬œà­‡à¬¨"], answer: "à¬…à¬®à­à¬³à¬œà¬¾à¬¨ğŸ’š"},
      {q: "â­ à¬—à¬› à¬¸à¬¬à­à¬œ à¬•à¬¾à¬¹à¬¿à¬à¬•à¬¿?", options: ["à¬ªà¬¾à¬£à¬¿ğŸ’§","à¬•à­à¬²à­‹à¬°à­‹à¬«à¬¿à¬²ğŸŒ¿","à¬¸à­‚à¬°à­à¬¯à­à­Ÿâ˜€ï¸"], answer: "à¬•à­à¬²à­‹à¬°à­‹à¬«à¬¿à¬²ğŸŒ¿"},
      {q: "ğŸŒ™ à¬šà¬¨à­à¬¦à­à¬°à¬° à¬•à­‡à¬¤à­‹à¬Ÿà¬¿ à¬°à­‚à¬ª?", options: ["4ğŸŒ“","6","8ğŸŒ•"], answer: "8ğŸŒ•"}
    ]
  },
  english: {
    en: [
      {q: "ğŸ“ Choose the CORRECT spelling:", options: ["Enviroment","Environmentâœ…","Envaironment"], answer: "Environmentâœ…"},
      {q: "ğŸ‘¶ What's the plural of 'Child'?", options: ["Childs","ChildrenğŸ‘¥","Childrens"], answer: "ChildrenğŸ‘¥"},
      {q: "ğŸ˜Š Which word means the same as 'Happy'?", options: ["SadğŸ˜¢","JoyfulğŸ‰","AngryğŸ˜ "], answer: "JoyfulğŸ‰"},
      {q: "ğŸ± What sound does a cat make?", options: ["WoofğŸ•","MeowğŸ±","MooğŸ„"], answer: "MeowğŸ±"},
      {q: "ğŸŒˆ What has many colors after rain?", options: ["Cloudâ˜ï¸","RainbowğŸŒˆ","Sunâ˜€ï¸"], answer: "RainbowğŸŒˆ"}
    ],
    hi: [
      {q: "ğŸ“ à¤¸à¤¹à¥€ à¤µà¤°à¥à¤¤à¤¨à¥€ à¤šà¥à¤¨à¥‡à¤‚:", options: ["à¤à¤¨à¤µà¤¾à¤¯à¤°à¤®à¥‡à¤‚à¤Ÿ","à¤à¤¨à¤µà¤¾à¤¯à¤°à¤¨à¤®à¥‡à¤‚à¤Ÿâœ…","à¤à¤¨à¤µà¥ˆà¤°à¤®à¥‡à¤‚à¤Ÿ"], answer: "à¤à¤¨à¤µà¤¾à¤¯à¤°à¤¨à¤®à¥‡à¤‚à¤Ÿâœ…"},
      {q: "ğŸ‘¶ 'à¤¬à¤šà¥à¤šà¤¾' à¤•à¤¾ à¤¬à¤¹à¥à¤µà¤šà¤¨ à¤•à¥à¤¯à¤¾ à¤¹à¥ˆ?", options: ["à¤¬à¤šà¥à¤šà¤¾s","à¤¬à¤šà¥à¤šà¥‡ğŸ‘¥","à¤¬à¤šà¥à¤šà¥‹à¤‚"], answer: "à¤¬à¤šà¥à¤šà¥‡ğŸ‘¥"},
      {q: "ğŸ˜Š 'à¤–à¥à¤¶' à¤•à¤¾ à¤¸à¤®à¤¾à¤¨à¤¾à¤°à¥à¤¥à¥€ à¤¶à¤¬à¥à¤¦?", options: ["à¤‰à¤¦à¤¾à¤¸ğŸ˜¢","à¤ªà¥à¤°à¤¸à¤¨à¥à¤¨ğŸ‰","à¤—à¥à¤¸à¥à¤¸à¤¾ğŸ˜ "], answer: "à¤ªà¥à¤°à¤¸à¤¨à¥à¤¨ğŸ‰"},
      {q: "ğŸ± à¤¬à¤¿à¤²à¥à¤²à¥€ à¤•à¥ˆà¤¸à¥€ à¤†à¤µà¤¾à¤œà¤¼ à¤•à¤°à¤¤à¥€ à¤¹à¥ˆ?", options: ["à¤­à¥Œà¤‚ğŸ•","à¤®à¥à¤¯à¤¾à¤Šà¤‚ğŸ±","à¤®à¥‚ğŸ„"], answer: "à¤®à¥à¤¯à¤¾à¤Šà¤‚ğŸ±"},
      {q: "ğŸŒˆ à¤¬à¤¾à¤°à¤¿à¤¶ à¤•à¥‡ à¤¬à¤¾à¤¦ à¤†à¤•à¤¾à¤¶ à¤®à¥‡à¤‚ à¤•à¥à¤¯à¤¾ à¤¦à¤¿à¤–à¤¤à¤¾ à¤¹à¥ˆ?", options: ["à¤¬à¤¾à¤¦à¤²â˜ï¸","à¤‡à¤‚à¤¦à¥à¤°à¤§à¤¨à¥à¤·ğŸŒˆ","à¤¸à¥‚à¤°à¤œâ˜€ï¸"], answer: "à¤‡à¤‚à¤¦à¥à¤°à¤§à¤¨à¥à¤·ğŸŒˆ"}
    ],
    or: [
      {q: "ğŸ“ à¬¸à¬ à¬¿à¬•à­ à¬¬à¬¨à¬¾à¬¨ à¬¬à¬¾à¬›à¬¨à­à¬¤à­:", options: ["à¬à¬¨à¬­à¬¾à­Ÿà¬°à¬®à­‡à¬£à­à¬Ÿ","à¬à¬¨à¬­à¬¾à­Ÿà¬°à¬¨à¬®à­‡à¬£à­à¬Ÿâœ…","à¬à¬¨à¬­à­ˆà¬°à¬®à­‡à¬£à­à¬Ÿ"], answer: "à¬à¬¨à¬­à¬¾à­Ÿà¬°à¬¨à¬®à­‡à¬£à­à¬Ÿâœ…"},
      {q: "ğŸ‘¶ 'à¬ªà¬¿à¬²à¬¾'à¬° à¬¬à¬¹à­à¬¬à¬šà¬¨ à¬•à¬£?", options: ["à¬ªà¬¿à¬²à¬¾s","à¬ªà¬¿à¬²à¬¾à¬®à¬¾à¬¨à­‡ğŸ‘¥","à¬ªà¬¿à¬²à¬¾à¬®à¬¾à¬¨à¬™à­à¬•"], answer: "à¬ªà¬¿à¬²à¬¾à¬®à¬¾à¬¨à­‡ğŸ‘¥"},
      {q: "ğŸ˜Š 'à¬–à­à¬¸à¬¿'à¬° à¬¸à¬®à¬¾à¬¨à¬¾à¬°à­à¬¥à¬•?", options: ["à¬¦à­à¬ƒà¬–à­€ğŸ˜¢","à¬†à¬¨à¬¨à­à¬¦à¬¿à¬¤ğŸ‰","à¬°à¬¾à¬—à­€ğŸ˜ "], answer: "à¬†à¬¨à¬¨à­à¬¦à¬¿à¬¤ğŸ‰"},
      {q: "ğŸ± à¬¬à¬¿à¬²à­‡à¬‡ à¬•à¬¿à¬ªà¬°à¬¿ à¬¶à¬¬à­à¬¦ à¬•à¬°à­‡?", options: ["à¬¹à¬‰ğŸ•","à¬®à¬¿à¬†à¬‰à¬ğŸ±","à¬®à­‹ğŸ„"], answer: "à¬®à¬¿à¬†à¬‰à¬ğŸ±"},
      {q: "ğŸŒˆ à¬¬à¬°à­à¬·à¬¾ à¬ªà¬°à­‡ à¬†à¬•à¬¾à¬¶à¬°à­‡ à¬•à¬£ à¬¦à­‡à¬–à¬¾à¬¯à¬¾à¬?", options: ["à¬®à­‡à¬˜â˜ï¸","à¬‡à¬¨à­à¬¦à­à¬°à¬§à¬¨à­ğŸŒˆ","à¬¸à­‚à¬°à­à¬¯à­à­Ÿâ˜€ï¸"], answer: "à¬‡à¬¨à­à¬¦à­à¬°à¬§à¬¨à­ğŸŒˆ"}
    ]
  }
};

// Sound effects using Web Audio API
function playSound(frequency, duration, type = 'sine') {
  try {
    const audioContext = new (window.AudioContext || window.webkitAudioContext)();
    const oscillator = audioContext.createOscillator();
    const gainNode = audioContext.createGain();
    
    oscillator.connect(gainNode);
    gainNode.connect(audioContext.destination);
    
    oscillator.frequency.value = frequency;
    oscillator.type = type;
    
    gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + duration);
    
    oscillator.start(audioContext.currentTime);
    oscillator.stop(audioContext.currentTime + duration);
  } catch (e) {
    console.log("Audio not supported");
  }
}

// Enhanced sound effects
function playCorrectSound() {
  playSound(523, 0.2); // C note
  setTimeout(() => playSound(659, 0.2), 100); // E note
  setTimeout(() => playSound(784, 0.3), 200); // G note
}

function playWrongSound() {
  playSound(200, 0.5, 'sawtooth');
}

function playGameStartSound() {
  playSound(440, 0.1);
  setTimeout(() => playSound(554, 0.1), 100);
  setTimeout(() => playSound(659, 0.2), 200);
}

function playLevelCompleteSound() {
  for(let i = 0; i < 5; i++) {
    setTimeout(() => playSound(523 + i * 50, 0.1), i * 100);
  }
}

// Add floating emojis for visual effect
function createFloatingEmoji(emoji, x, y) {
  const emojiElement = document.createElement('div');
  emojiElement.className = 'floating-emoji';
  emojiElement.innerText = emoji;
  emojiElement.style.left = x + 'px';
  emojiElement.style.top = y + 'px';
  document.body.appendChild(emojiElement);
  
  setTimeout(() => {
    emojiElement.remove();
  }, 3000);
}

// Show celebration animation
function showCelebration(type) {
  const celebrationDiv = document.createElement('div');
  celebrationDiv.className = 'celebration';
  
  if(type === 'correct') {
    celebrationDiv.innerText = 'ğŸ‰';
    createFloatingEmoji('â­', Math.random() * window.innerWidth, Math.random() * 200);
    createFloatingEmoji('ğŸŒŸ', Math.random() * window.innerWidth, Math.random() * 200);
  } else if(type === 'wrong') {
    celebrationDiv.innerText = 'ğŸ˜…';
    createFloatingEmoji('ğŸ’«', Math.random() * window.innerWidth, Math.random() * 200);
  } else if(type === 'complete') {
    celebrationDiv.innerText = 'ğŸ†';
    for(let i = 0; i < 10; i++) {
      setTimeout(() => {
        createFloatingEmoji('ğŸŠ', Math.random() * window.innerWidth, Math.random() * 300);
      }, i * 100);
    }
  }
  
  document.body.appendChild(celebrationDiv);
  setTimeout(() => celebrationDiv.remove(), 1000);
}

// Start game with enhanced effects
function startGame(subject) {
  playGameStartSound();
  currentSubject = subject;
  currentQuestion = 0;
  score = 0;
  lives = 3;
  gameActive = true;
  questions = questionBank[subject][document.getElementById('language').value];
  
  const subjectEmojis = {
    'math': 'ğŸ”¢ MATH MAGIC QUEST! ğŸ¯',
    'science': 'ğŸ”¬ SCIENCE ADVENTURE! ğŸš€',
    'english': 'ğŸ“š WORD WIZARD CHALLENGE! âœ¨'
  };
  
  document.getElementById('subjectTitle').innerText = subjectEmojis[subject];
  document.getElementById('gameBox').style.display = 'block';
  document.getElementById('teacherDashboard').style.display = 'none';
  document.getElementById('educationalBox').style.display = 'none';
  updateGameStats();
  loadQuestion();
  
  // Add some celebration emojis when starting
  for(let i = 0; i < 5; i++) {
    setTimeout(() => {
      createFloatingEmoji('ğŸ®', Math.random() * window.innerWidth, Math.random() * 200);
    }, i * 200);
  }
}

// Change language mid-game
function changeLanguage() {
  if(currentSubject) {
    questions = questionBank[currentSubject][document.getElementById('language').value];
    stopFalling();
    loadQuestion();
  }
}

// Enhanced game statistics display
function updateGameStats() {
  const heartsArray = ['ğŸ’–', 'ğŸ’', 'ğŸ’—', 'ğŸ’•', 'ğŸ’“'];
  const starsArray = ['â­', 'ğŸŒŸ', 'âœ¨', 'ğŸ†', 'ğŸ‡'];
  
  document.getElementById('livesDisplay').innerHTML = 
    heartsArray[lives % heartsArray.length] + ' Lives: ' + lives;
  document.getElementById('pointsDisplay').innerHTML = 
    starsArray[score % starsArray.length] + ' Score: ' + score;
}

// Enhanced question loading with motivational text
function loadQuestion() {
  stopFalling();
  gameActive = true;
  document.getElementById('educationalBox').style.display = 'none';
  
  if(currentQuestion < questions.length && lives > 0) {
    const motivationalPrefixes = [
      "ğŸ¯ Ready for this? ", "ğŸš€ Here comes a fun one! ", "âš¡ Quick thinking needed! ",
      "ğŸŒŸ You've got this! ", "ğŸª Challenge time! "
    ];
    
    const prefix = motivationalPrefixes[currentQuestion % motivationalPrefixes.length];
    document.getElementById('questionBox').innerText = prefix + questions[currentQuestion].q;
    document.getElementById('scoreBox').innerText = '';
    startFallingAnswers();
  } else if(lives <= 0) {
    playWrongSound();
    document.getElementById('scoreBox').innerHTML = "ğŸ’€ Game Over! But hey, you tried! ğŸŒŸ<br>Final Score: " + score + "/" + questions.length;
    document.getElementById('questionBox').innerText = 'ğŸ”„ Ready to try again? You can do better! ğŸ’ª';
    showCelebration('wrong');
  } else {
    playLevelCompleteSound();
    document.getElementById('scoreBox').innerHTML = "ğŸ‰ AMAZING! You're a CHAMPION! ğŸ†<br>Perfect Score: " + score + "/" + questions.length;
    document.getElementById('questionBox').innerText = 'ğŸ‘‘ You are absolutely INCREDIBLE! ğŸŠ';
    showCelebration('complete');
  }
}

// Plain falling answers - no special colors initially
function startFallingAnswers() {
  const container = document.getElementById('gameContainer');
  container.innerHTML = '';
  fallingAnswers = [];
  
  const currentQ = questions[currentQuestion];
  const containerWidth = container.offsetWidth;
  
  currentQ.options.forEach((option, index) => {
    const answerDiv = document.createElement('div');
    answerDiv.className = 'fallingAnswer'; // All answers look the same initially
    answerDiv.innerText = option;
    answerDiv.style.left = (index * (containerWidth / currentQ.options.length) + 30) + 'px';
    answerDiv.style.top = '-50px';
    
    // NO special styling for correct answer initially
    
    answerDiv.onclick = () => {
      if(gameActive) {
        catchAnswer(option, answerDiv);
      }
    };
    
    container.appendChild(answerDiv);
    fallingAnswers.push({element: answerDiv, answer: option});
  });
  
  gameInterval = setInterval(moveAnswers, 40);
}

// Enhanced answer movement
function moveAnswers() {
  if(!gameActive) return;
  
  const container = document.getElementById('gameContainer');
  const containerHeight = container.offsetHeight;
  
  fallingAnswers.forEach((item, index) => {
    const currentTop = parseInt(item.element.style.top) || 0;
    const newTop = currentTop + 4;
    
    if(newTop > containerHeight - 60) {
      if(item.answer === questions[currentQuestion].answer) {
        lives--;
        updateGameStats();
        playWrongSound();
        document.getElementById('scoreBox').innerHTML = 'ğŸ˜± Oops! The correct answer escaped! Try to catch it faster next time! âš¡';
        showCelebration('wrong');
        if(lives <= 0) {
          gameActive = false;
          stopFalling();
          setTimeout(() => loadQuestion(), 2000);
          return;
        }
      }
      item.element.remove();
      fallingAnswers.splice(index, 1);
    } else {
      item.element.style.top = newTop + 'px';
    }
  });
  
  if(fallingAnswers.length === 0) {
    stopFalling();
  }
}

// NEW: Reveal correct answer ONLY when wrong answer is clicked
function revealCorrectAnswerOnMistake() {
  const currentQ = questions[currentQuestion];
  
  // Highlight all answers to show which was correct
  fallingAnswers.forEach(item => {
    const element = item.element;
    
    if(item.answer === currentQ.answer) {
      // Highlight the correct answer in bright green
      element.classList.add('revealedCorrectAnswer');
      element.classList.remove('fallingAnswer');
      
      // Add educational message
      setTimeout(() => {
        const educationalBox = document.getElementById('educationalBox');
        educationalBox.innerHTML = `
          <strong>ğŸ“š Learn:</strong> The correct answer was <strong>"${currentQ.answer}"</strong> 
          <br>âœ… Now you know! Remember this for next time! ğŸ§ 
        `;
        educationalBox.style.display = 'block';
      }, 1000);
      
    } else {
      // Make wrong answers fade out
      element.classList.add('revealedWrongAnswer');
      element.classList.remove('fallingAnswer');
    }
    
    // Stop any further clicking
    element.onclick = null;
  });
}

// Enhanced answer catching - reveal ONLY on wrong answer
function catchAnswer(selected, element) {
  if(!gameActive) return;
  
  gameActive = false;
  stopFalling();
  
  const encouragingMessages = [
    "ğŸŒŸ Fantastic! ", "ğŸš€ Brilliant! ", "â­ Excellent! ", "ğŸ¯ Perfect! ", "ğŸ‰ Amazing! "
  ];
  
  const tryAgainMessages = [
    "ğŸ˜Š Almost! ", "ğŸ’ª Good try! ", "ğŸŒŸ Close one! ", "ğŸ¯ Nice attempt! ", "ğŸ’« Keep going! "
  ];
  
  if(selected === questions[currentQuestion].answer) {
    // CORRECT ANSWER - just celebrate, no reveal needed
    score++;
    playCorrectSound();
    showCelebration('correct');
    const message = encouragingMessages[Math.floor(Math.random() * encouragingMessages.length)];
    document.getElementById('scoreBox').innerHTML = message + 'You caught the right answer! +1 point! ğŸŠ';
    
    // Just make the correct answer glow
    element.classList.add('clickedCorrectAnswer');
    element.classList.remove('fallingAnswer');
    
    // Add sparkle effect
    createFloatingEmoji('âœ¨', element.offsetLeft, element.offsetTop);
    createFloatingEmoji('â­', element.offsetLeft + 50, element.offsetTop);
    
  } else {
    // WRONG ANSWER - NOW reveal the correct answer
    lives--;
    playWrongSound();
    showCelebration('wrong');
    const message = tryAgainMessages[Math.floor(Math.random() * tryAgainMessages.length)];
    document.getElementById('scoreBox').innerHTML = 
      message + `Wrong choice! Let me show you the correct answer! ğŸ’ª`;
    
    // Make clicked wrong answer shake
    element.classList.add('clickedWrongAnswer');
    element.classList.remove('fallingAnswer');
    
    // NOW reveal the correct answer in green
    revealCorrectAnswerOnMistake();
  }
  
  updateGameStats();
  
  // Clear clicking for all answers
  fallingAnswers.forEach(item => {
    item.element.onclick = null;
  });
}

function stopFalling() {
  if(gameInterval) {
    clearInterval(gameInterval);
    gameInterval = null;
  }
}

function nextQuestion() {
  if(lives > 0) {
    currentQuestion++;
    loadQuestion();
    playSound(440, 0.1); // Next question sound
  }
}

// Enhanced dashboard with badges
function showDashboard() {
  stopFalling();
  document.getElementById('gameBox').style.display = 'none';
  document.getElementById('teacherDashboard').style.display = 'block';
  document.getElementById('yourSub').innerText = currentSubject.toUpperCase() + ' MASTER!';
  document.getElementById('yourScore').innerText = score + "/" + questions.length;
  
  // Determine badge based on performance
  let badge = '';
  const percentage = (score / questions.length) * 100;
  if(percentage === 100) badge = 'ğŸ† LEGEND!';
  else if(percentage >= 80) badge = 'ğŸ¥‡ CHAMPION!';
  else if(percentage >= 60) badge = 'ğŸ¥ˆ STAR!';
  else if(percentage >= 40) badge = 'ğŸ¥‰ FIGHTER!';
  else badge = 'ğŸŒŸ LEARNER!';
  
  document.getElementById('yourBadge').innerText = badge;
  
  playLevelCompleteSound();
  showCelebration('complete');
}

// Add some floating emojis on page load
window.addEventListener('load', () => {
  const welcomeEmojis = ['ğŸ®', 'ğŸ“š', 'ğŸŒŸ', 'ğŸš€', 'ğŸ¯', 'ğŸŠ'];
  for(let i = 0; i < 8; i++) {
    setTimeout(() => {
      const emoji = welcomeEmojis[Math.floor(Math.random() * welcomeEmojis.length)];
      createFloatingEmoji(emoji, Math.random() * window.innerWidth, Math.random() * 300);
    }, i * 500);
  }
});

</script>

</body>
</html>